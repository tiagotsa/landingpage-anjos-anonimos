# Opcional: Remova a linha 'version: ...' se ela existir no TOPO do arquivo.
# Se não houver linha 'version:' no topo, não adicione nada aqui.

services:
  web:
    build: .
    container_name: anjos-anonimos-web # Adicionado para nome fixo e fácil remoção manual se necessário
    ports:
      # Mapeia a porta 8081 do HOST para a porta 80 do CONTAINER
      - "8081:80"
      # Mapeia a porta 8443 do HOST para a porta 443 do CONTAINER
      - "8443:443"
    volumes:
      # Monta o diretório atual (arquivos do projeto) para a raiz HTML do Nginx
      - ./:/usr/share/nginx/html
      # Monta o nginx.conf local para o diretório de configuração do Nginx
      - ./nginx.conf:/etc/nginx/conf.d/default.conf
      # Monta os certificados Let's Encrypt do host (somente leitura)
      # Lembre-se: o acesso HTTPS será pela porta 8443, não 443 padrão
      - /etc/letsencrypt:/etc/letsencrypt:ro
    restart: always
    # A seção 'networks' não é necessária para esta abordagem de mapeamento de portas diretas

# A seção 'networks:' global também não é necessária aqui